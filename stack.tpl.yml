version: "3.5"
services:
  nginx:
    image: hatlonely/nginx:${version}
    hostname: nginx
    deploy:
      replicas: 1
      restart_policy:
        condition: on-failure
    ports:
      - "6000:80"
    volumes:
      - "/var/docker/nginx/log:/var/log/nginx"
      - "/var/docker/nginx/run:/var/run"
    networks:
      - nginxnet
      - kibananet
      - grafananet
      - jenkinsnet
      - wordpressnet
      - chronografnet
      - vue-accountnet
      - vue-toolnet
      - vue-ancientnet
      - go-accountnet
      - go-cloudnet
      - go-ancientnet
networks:
  nginxnet:
    name: nginxnet
  kibananet:
    external: true
    name: kibananet
  grafananet:
    external: true
    name: grafananet
  jenkinsnet:
    external: true
    name: jenkinsnet
  wordpressnet:
    external: true
    name: wordpressnet
  chronografnet:
    external: true
    name: chronografnet
  vue-accountnet:
    external: true
    name: vue-accountnet
  vue-toolnet:
    external: true
    name: vue-toolnet
  vue-ancientnet:
    external: true
    name: vue-ancientnet
  go-accountnet:
    external: true
    name: go-accountnet
  go-cloudnet:
    external: true
    name: go-cloudnet
  go-ancientnet:
    external: true
    name: go-ancientnet
